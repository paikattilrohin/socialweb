DROP TABLE post;
DROP TABLE user;
DROP TABLE heart;
DROP TABLE favorite;

CREATE TABLE user(userid INT NOT NULL AUTO_INCREMENT,
                  name VARCHAR(50) NOT NULL,
                  email VARCHAR(50) NOT NULL,
                  password VARCHAR(25) NOT NULL,
                  CONSTRAINT USER_PK PRIMARY KEY (USERID));

CREATE TABLE post(postid INT NOT NULL AUTO_INCREMENT,
                   title VARCHAR(255),
                   name varchar(20),
                   content VARCHAR(255) NOT NULL,
                   userid VARCHAR(255),
                   `date` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
                   CONSTRAINT Post_PK PRIMARY KEY (postid) );

CREATE TABLE heart(likeid INT NOT NULL AUTO_INCREMENT,
                  postid VARCHAR(20),
                  userid VARCHAR(20),
                  CONSTRAINT LIKE_PK PRIMARY KEY (likeid));
	
CREATE TABLE favorite(favoriteid INT NOT NULL AUTO_INCREMENT,
                  postid VARCHAR(20),
                  userid VARCHAR(20),
                  tag VARCHAR(50),
                  CONSTRAINT FAVORITE_PK PRIMARY KEY (favoriteid));


ALTER TABLE user AUTO_INCREMENT=10000;
ALTER TABLE post AUTO_INCREMENT=10000;
ALTER TABLE heart AUTO_INCREMENT=10000;
ALTER TABLE favorite AUTO_INCREMENT=10000;


INSERT INTO user (name, email, password) VALUES ('xyz', 'xyz', 'xyz');
INSERT INTO user (name, email, password) VALUES ('abc', 'abc', 'abc');
INSERT INTO user (name, email, password) VALUES ('test', 'test', 'test');


select content, (case when content like '%python%' then 1 else 0 end +
case when content like '%write%' then 1 else 0 end +
case when content like '%file%' then 1 else 0 end) as "value" from post
where content like '%python%' OR content like '%write%' OR content like '%file%'
order by value DESC;






